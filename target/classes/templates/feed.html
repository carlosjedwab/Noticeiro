<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
    <head>
        <title>Noticeiro - Feed</title>
        <link rel="stylesheet" type="text/css" th:href="@{/css/feed_style.css}" href="../static/css/feed_style.css">
        <link rel="stylesheet" type="text/css" th:href="@{/css/noticeiro_style.css}" href="../static/css/noticeiro_style.css" >
        <link rel = "icon" type = "image/png" th:href = "@{/images/N.png}">
    </head>
    <body>
	     
		<div class = "feed_body">
	          
	       <form th:action="@{/feed/links/add}" method="post" class = "add_link_form">
		 	  <label class="insert_link"><input type="text" name="url" placeholder="Novo link"/> </label>
		 	  <p th:if="${param.url_error}" class = "url_error">URL já existente.</p>
		  	  <p th:if="${param.invalid}" class = "url_error">URL inválida.</p> 
		 	  <input type="image" th:src="@{images/add_black.png}" alt="submit" class="add_button"/>
	       </form>
	        
	        <div class ="filter">
	        
				<table class = "links_table">
		            <thead>
		                <tr><th> Lista de URLs</th></tr>
		            </thead>
		            <tbody>
		                <tr th:if="${links.empty}">
		                    <td> Não há links cadastrados </td>
		                </tr>
		                <tr th:each="link : ${links}">
		                    <td><span th:text="${link.url}"> URL </span>
		                    <form th:action="@{/feed/links/delete}" th:method="post" class = "delete">
		                    	<input type="hidden" name="url" th:value=${link.url} />
		                    	<input type="image" th:src="@{images/lixo.png}" alt="submit" class="delete_button"/>
		                  	</form> 
		                	</td>	
		                </tr>     
		            </tbody>
				</table>
				
				<table class = "pubs_table" th:if="${!publicacoes.empty}">
		   			<thead>
		   				<tr><th>Publicação</th><th>Título da Fonte</th><th>Fonte</th></tr>
		   			</thead>
		   			<tbody>
			   			<tr th:each="publicacao: ${publicacoes}">
			   				<td><a th:href="${publicacao.link}" target="_blank" rel="noopener noreferrer"><span th:text="${publicacao.title}">Title</span></a></td>
			   				<td><span th:text="${publicacao.feedTitle}"></span></td>
			   				<td><span th:text="${publicacao.source}"></span></td>
			   			</tr>
		   			</tbody>
				</table>
   			
	   		</div>
	   		
	  	 </div>
	  	 <div class="nav">
			<a class='link' id='home_button' th:href="@{home}">Home</a>
     	   	<form th:action="@{/logout}" method="post">
           		<input type="image" th:src="@{images/logout.png}" alt="submit" class="logout_button"/>
        	</form>
	        <p class = "username_message"> Bem-vindo ao seu feed de notícias, [[${#httpServletRequest.remoteUser}]]!</p>
	    </div>
	  	 
    </body>
</html>